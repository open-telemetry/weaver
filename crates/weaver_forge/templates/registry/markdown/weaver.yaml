whitespace_control:
  trim_blocks: true
  lstrip_blocks: true

templates:
  - template: attributes.md.j2
    filter: semconv_grouped_attributes
    application_mode: each
    file_name: "attributes/{{ ctx.root_namespace | snake_case }}.md"

  - template: metrics.md.j2
    filter: semconv_grouped_metrics
    application_mode: each
    file_name: "metrics/{{ ctx.root_namespace | snake_case }}.md"

  - template: spans.md.j2
    filter: >
      semconv_signal("span"; {})
      | group_by(.root_namespace)
      | map({ root_namespace: .[0].root_namespace, spans: . | sort_by(.id) })
    application_mode: each
    file_name: "spans/{{ ctx.root_namespace | snake_case }}.md"

  - template: events.md.j2
    filter: >
      .groups
      | map(select(.type == "event"))
      | map(. + {
          root_namespace: (if .id | index(".") then (.id | split(".") | .[0:-1] | join(".")) else "other" end)
        })
      | group_by(.root_namespace)
      | map({ root_namespace: .[0].root_namespace, events: . | sort_by(.id) })
    application_mode: each
    file_name: "events/{{ ctx.root_namespace | snake_case }}.md"

  - template: entities.md.j2
    filter: >
      semconv_signal("resource"; {})
      | group_by(.root_namespace)
      | map({ root_namespace: .[0].root_namespace, entities: . | sort_by(.id) })
    application_mode: single
    file_name: "entities.md"
